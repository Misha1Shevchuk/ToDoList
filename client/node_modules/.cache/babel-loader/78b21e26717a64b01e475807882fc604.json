{"ast":null,"code":"var _jsxFileName = \"/home/misha/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Projects/ToDoList/client/src/components/Projects/MenuProjects.jsx\";\nimport React from \"react\";\nimport NewProjectForm from './NewProjectForm';\nimport ProjectsList from './ProjectsList';\nimport ItemProject from \"./ItemProject\";\n\nclass MenuProjects extends React.Component {\n  constructor() {\n    super();\n\n    this.sendFormNewProject = async e => {\n      e.preventDefault();\n      let formSendProject = document.forms[\"form-send-project\"];\n      let newProject = formSendProject.elements[\"newproject\"].value;\n\n      if (newProject !== \"\") {\n        // Serialize data to JSON\n        let project = JSON.stringify({\n          newproject: newProject\n        });\n        let request = new XMLHttpRequest(); // Send form to adress \"/sendproject\"\n\n        request.open(\"POST\", \"/sendproject\", true);\n        request.setRequestHeader(\"Content-Type\", \"application/json\"); // Clear form\n\n        document.getElementById('new-project').value = \"\";\n        console.log(project);\n        request.send(project);\n        this.getObjetProject();\n      }\n    };\n\n    this.state = {\n      list: []\n    };\n    this.sendFormNewProject = this.sendFormNewProject.bind(this);\n  } // componentDidMount() {\n  //     this.getObjetProject();\n  // }\n  // getObjetProject = async () => {\n  //     const api_url = await fetch(`http://localhost:3001/projectsList`, { method: \"POST\" });\n  //     let json = await api_url.json();\n  //     this.setState({\n  //         list: json\n  //     });\n  // }\n\n\n  componentWillMount() {\n    fetch(\"http://localhost:3001/projectsList\", {\n      method: \"POST\"\n    }).then(results => {\n      return results.json();\n    }).then(data => {\n      let projects = data.results.map(proj => {\n        return React.createElement(\"ul\", {\n          className: \"menu-list\",\n          id: \"ul-projects-list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, React.createElement(ItemProject, {\n          element: proj,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }));\n      });\n      this.setState({\n        list: projects\n      });\n      console.log(\"state\", this.state.list);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"menu-item\",\n      id: \"item-project\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"menu-item-head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0438\"), React.createElement(\"b\", {\n      className: \"menu-button-add\",\n      id: \"add-project\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \" + \")), React.createElement(\"div\", {\n      className: \"form-add-div\",\n      id: \"form-add-divproject\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, this.state.list, React.createElement(\"div\", {\n      className: \"menu-item-headbutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u0432\\u0438\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\")), React.createElement(NewProjectForm, {\n      sendFormNewProject: this.sendFormNewProject,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default MenuProjects;","map":{"version":3,"sources":["/home/misha/Документи/Projects/ToDoList/client/src/components/Projects/MenuProjects.jsx"],"names":["React","NewProjectForm","ProjectsList","ItemProject","MenuProjects","Component","constructor","sendFormNewProject","e","preventDefault","formSendProject","document","forms","newProject","elements","value","project","JSON","stringify","newproject","request","XMLHttpRequest","open","setRequestHeader","getElementById","console","log","send","getObjetProject","state","list","bind","componentWillMount","fetch","method","then","results","json","data","projects","map","proj","setState","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,MAAMC,YAAN,SAA2BJ,KAAK,CAACK,SAAjC,CAA2C;AACvCC,EAAAA,WAAW,GAAG;AACV;;AADU,SAsCdC,kBAtCc,GAsCO,MAAOC,CAAP,IAAa;AAC9BA,MAAAA,CAAC,CAACC,cAAF;AAEA,UAAIC,eAAe,GAAGC,QAAQ,CAACC,KAAT,CAAe,mBAAf,CAAtB;AACA,UAAIC,UAAU,GAAGH,eAAe,CAACI,QAAhB,CAAyB,YAAzB,EAAuCC,KAAxD;;AACA,UAAIF,UAAU,KAAK,EAAnB,EAAuB;AACnB;AACA,YAAIG,OAAO,GAAGC,IAAI,CAACC,SAAL,CAAe;AAAEC,UAAAA,UAAU,EAAEN;AAAd,SAAf,CAAd;AACA,YAAIO,OAAO,GAAG,IAAIC,cAAJ,EAAd,CAHmB,CAInB;;AACAD,QAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqB,cAArB,EAAqC,IAArC;AACAF,QAAAA,OAAO,CAACG,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC,EANmB,CAOnB;;AACAZ,QAAAA,QAAQ,CAACa,cAAT,CAAwB,aAAxB,EAAuCT,KAAvC,GAA+C,EAA/C;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAYV,OAAZ;AACAI,QAAAA,OAAO,CAACO,IAAR,CAAaX,OAAb;AACA,aAAKY,eAAL;AACH;AACJ,KAxDa;;AAEV,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE;AADG,KAAb;AAGA,SAAKvB,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBwB,IAAxB,CAA6B,IAA7B,CAA1B;AACH,GAPsC,CASvC;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAC,EAAAA,kBAAkB,GAAG;AACjBC,IAAAA,KAAK,uCAAuC;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAvC,CAAL,CACCC,IADD,CACMC,OAAO,IAAI;AACb,aAAOA,OAAO,CAACC,IAAR,EAAP;AACH,KAHD,EAGGF,IAHH,CAGQG,IAAI,IAAI;AACZ,UAAIC,QAAQ,GAAGD,IAAI,CAACF,OAAL,CAAaI,GAAb,CAAkBC,IAAD,IAAU;AACtC,eACI;AAAI,UAAA,SAAS,EAAC,WAAd;AAA0B,UAAA,EAAE,EAAC,kBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,oBAAC,WAAD;AAAa,UAAA,OAAO,EAAEA,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADH,CADJ;AAKH,OANc,CAAf;AAOA,WAAKC,QAAL,CAAc;AAACZ,QAAAA,IAAI,EAAES;AAAP,OAAd;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKG,KAAL,CAAWC,IAAhC;AACH,KAbD;AAcH;;AAuBDa,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,EAAE,EAAC,cAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDADJ,EACoB;AAAG,MAAA,SAAS,EAAC,iBAAb;AAA+B,MAAA,EAAE,EAAC,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADpB,CADJ,EAII;AAAK,MAAA,SAAS,EAAC,cAAf;AAA8B,MAAA,EAAE,EAAC,qBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEK,KAAKd,KAAL,CAAWC,IAFhB,EAGI;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAAtC,CAHJ,EAII,oBAAC,cAAD;AAAgB,MAAA,kBAAkB,EAAE,KAAKvB,kBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CAJJ,CADJ;AAaH;;AAzEsC;;AA4E3C,eAAeH,YAAf","sourcesContent":["import React from \"react\";\nimport NewProjectForm from './NewProjectForm';\nimport ProjectsList from './ProjectsList';\nimport ItemProject from \"./ItemProject\";\n\nclass MenuProjects extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            list: []\n        };\n        this.sendFormNewProject = this.sendFormNewProject.bind(this);\n    }\n\n    // componentDidMount() {\n    //     this.getObjetProject();\n    // }\n\n    // getObjetProject = async () => {\n    //     const api_url = await fetch(`http://localhost:3001/projectsList`, { method: \"POST\" });\n    //     let json = await api_url.json();\n    //     this.setState({\n    //         list: json\n    //     });\n    // }\n\n    componentWillMount() {\n        fetch(`http://localhost:3001/projectsList`, { method: \"POST\" })\n        .then(results => {\n            return results.json();\n        }).then(data => {\n            let projects = data.results.map((proj) => {\n                return (\n                    <ul className=\"menu-list\" id=\"ul-projects-list\">\n                       <ItemProject element={proj} />\n                    </ul>\n                )\n            })\n            this.setState({list: projects});\n            console.log(\"state\", this.state.list);\n        })\n    }\n    \n\n    sendFormNewProject = async (e) => {\n        e.preventDefault();\n\n        let formSendProject = document.forms[\"form-send-project\"];\n        let newProject = formSendProject.elements[\"newproject\"].value;\n        if (newProject !== \"\") {\n            // Serialize data to JSON\n            let project = JSON.stringify({ newproject: newProject });\n            let request = new XMLHttpRequest();\n            // Send form to adress \"/sendproject\"\n            request.open(\"POST\", \"/sendproject\", true);\n            request.setRequestHeader(\"Content-Type\", \"application/json\");\n            // Clear form\n            document.getElementById('new-project').value = \"\";\n            console.log(project);\n            request.send(project);\n            this.getObjetProject();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"menu-item\" id=\"item-project\">\n                <div className=\"menu-item-head\" >\n                    <h4>Проекти</h4><b className=\"menu-button-add\" id=\"add-project\"> + </b>\n                </div>\n                <div className=\"form-add-div\" id=\"form-add-divproject\">\n                    {/* <ProjectsList list={this.state.list} />  */}\n                    {this.state.list}\n                    <div className=\"menu-item-headbutton\"><b>Новий проект</b></div>\n                    <NewProjectForm sendFormNewProject={this.sendFormNewProject} />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default MenuProjects;\n"]},"metadata":{},"sourceType":"module"}